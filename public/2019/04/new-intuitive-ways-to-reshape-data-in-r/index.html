

  
    
  


  





  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.36 with theme Tranquilpeak 0.4.3-BETA">
    <title>New intuitive ways for reshaping data in R: long live pivot_longer() and pivot_wider()</title>
    <meta name="author" content="Riinu Ots">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="TLDR: there are two new and very intuitive R functions for reshaping data: see Examples of pivot_longer() and pivot_wider() below. At the time of writing, these new functions are extremely fresh and only exist in the development version on GitHub (see Installation), we should probably wait for the tidyverse team to officially release them (in CRAN) before putting them into day-to-day use.
Exciting!
Introduction The juxtapose of data collection vs data analysis: data that was very easy to collect, is probably very hard to analyse, and vice versa.">
    <meta property="og:description" content="TLDR: there are two new and very intuitive R functions for reshaping data: see Examples of pivot_longer() and pivot_wider() below. At the time of writing, these new functions are extremely fresh and only exist in the development version on GitHub (see Installation), we should probably wait for the tidyverse team to officially release them (in CRAN) before putting them into day-to-day use.
Exciting!
Introduction The juxtapose of data collection vs data analysis: data that was very easy to collect, is probably very hard to analyse, and vice versa.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="New intuitive ways for reshaping data in R: long live pivot_longer() and pivot_wider()">
    <meta property="og:url" content="/2019/04/new-intuitive-ways-to-reshape-data-in-r/">
    <meta property="og:site_name" content="Riinu&#39;s scripting diary">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Riinu&#39;s scripting diary">
    <meta name="twitter:description" content="TLDR: there are two new and very intuitive R functions for reshaping data: see Examples of pivot_longer() and pivot_wider() below. At the time of writing, these new functions are extremely fresh and only exist in the development version on GitHub (see Installation), we should probably wait for the tidyverse team to officially release them (in CRAN) before putting them into day-to-day use.
Exciting!
Introduction The juxtapose of data collection vs data analysis: data that was very easy to collect, is probably very hard to analyse, and vice versa.">
    
      <meta name="twitter:creator" content="@_Riinu_">
    
    

    
    

    
      <meta property="og:image" content="https://pbs.twimg.com/profile_images/1090693362473152512/IAd8vXHs_400x400.jpg">
    

    
      <meta property="og:image" content="/img/thumbnails/tidyr.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114648473-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Riinu&#39;s scripting diary</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="https://pbs.twimg.com/profile_images/1090693362473152512/IAd8vXHs_400x400.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="https://pbs.twimg.com/profile_images/1090693362473152512/IAd8vXHs_400x400.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Riinu Ots</h4>
        
          <h5 class="sidebar-profile-bio">if it aint broke, you&rsquo;re outdated</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/riinuots">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://healthyr.surgicalinformatics.org/">
    
      <i class="sidebar-button-icon fa fa-lg fa-book"></i>
      
      <span class="sidebar-button-desc">Book</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://minorplanetcenter.net/db_search/show_object?object_id=25616">
    
      <i class="sidebar-button-icon fa fa-lg fa-space-shuttle"></i>
      
      <span class="sidebar-button-desc">Asteroid</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/pdf/cv_riinu_ots.pdf">
    
      <i class="sidebar-button-icon fa fa-lg fa-file"></i>
      
      <span class="sidebar-button-desc">CV</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://scholar.google.co.uk/citations?user=CeW7a8AAAAAJ">
    
      <i class="sidebar-button-icon fa fa-lg fa-pencil"></i>
      
      <span class="sidebar-button-desc">Publications</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/_Riinu_">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      New intuitive ways for reshaping data in R: long live pivot_longer() and pivot_wider()
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-04-07T00:00:00Z">
        
  April 7, 2019

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="/categories/r">R</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>TLDR: there are two new and very intuitive R functions for reshaping data: see <a href="#examples">Examples</a> of <code>pivot_longer()</code> and <code>pivot_wider()</code> below. At the time of writing, these new functions are extremely fresh and only exist in the development version on GitHub (see <a href="#installation">Installation</a>), we should probably wait for the tidyverse team to officially release them (in CRAN) before putting them into day-to-day use.</p>
<p>Exciting!</p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The juxtapose of <em>data collection</em> vs <em>data analysis</em>: data that was very easy to collect, is probably very hard to analyse, and vice versa. For example, if data is collected/written down whichever format was most convenient at the time of data collection, it is probably not recorded in a regularly shaped table, with various bits of information in different parts of the document. And even if data is collected into a table, it is often intuitive (for data entry) to include information about the same variable in different columns. For example, look at this example data I just made up:</p>
<pre class="r"><code>library(tidyverse)

candydata_raw = read_csv(&quot;2019-04-07_candy_preference_data.csv&quot;)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">candy_type</th>
<th align="right">likes age: 5</th>
<th align="right">likes age: 10</th>
<th align="right">likes age: 15</th>
<th align="right">gets age: 5</th>
<th align="right">gets age: 10</th>
<th align="right">gets age: 15</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="right">10</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">8</td>
<td align="right">6</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>For each candy type, there are 8 columns with values. But actually, these 8 columns capture a combination of 3 variables: <code>age</code>, <code>likes</code> and <code>eats</code>. This is known as the wide format, and it is a convenient way to either note down or even present values. It is human-readable. For effective data analysis, however, we need data to be in the tidy data format, where each column is a single variable, and each row a single observation (<a href="https://www.jstatsoft.org/article/view/v059i10" class="uri">https://www.jstatsoft.org/article/view/v059i10</a>). It needs to be less human-readable and more computer-friendly.</p>
<p>Some of you may remember now retired <code>reshape2::melt()</code> or <code>reshape2::dcast()</code>, and many of you (inclduing myself!) have struggled remebering the arguments for <code>tidyr::gather()</code> and <code>tidyr::spread()</code>. Based on extensive community feedback, the tidyverse team have reinveted these functions using both more intuitive names, as well as clearer syntax (arguments):</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Thanks to all 2649 (!!!) people who completed my survey about table shapes! I&#39;ve done analysed the data at <a href="https://t.co/hyu1o91xRm">https://t.co/hyu1o91xRm</a> and the new functions will be called pivot_longer() and pivot_wider() <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a></p>&mdash; Hadley Wickham (@hadleywickham) <a href="https://twitter.com/hadleywickham/status/1109816130774986753?ref_src=twsrc%5Etfw">March 24, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</div>
<div id="installation20190407" class="section level1">
<h1>Installation</h1>
<p>These functions were added just a month ago, so these functions are not yet included in the standard version of <code>tidyr</code> that comes with <code>install.packages(&quot;tidyverse&quot;)</code> or even <code>update.packages()</code> (the current version of <code>tidyr</code> on CRAN is 0.8.3). To play with the bleeding edge versions of R packages, run <code>install.packages(&quot;devtools&quot;)</code> and then <code>devtools::install_github(&quot;tidyverse/tidyr&quot;)</code>. If you are a Mac user and it asks you “Do you want to install from sources the package which needs compilation?”, say Yes.</p>
<p>You might need to Restart R (Session menu at the top) and load <code>library(tidyverse)</code> again. You can check whether you now have these functions installed by typing in <code>pivot_longer</code> and pressing F1 - if a relevant Help tab pops open you got it.</p>
</div>
<div id="examples20190407" class="section level1">
<h1>Examples</h1>
<pre class="r"><code>candydata_longer = candydata_raw %&gt;% 
  pivot_longer(contains(&quot;age&quot;))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">candy_type</th>
<th align="left">name</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">likes age: 5</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">likes age: 10</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">likes age: 15</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">gets age: 5</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">gets age: 10</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">gets age: 15</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">likes age: 5</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">likes age: 10</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">likes age: 15</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">gets age: 5</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">gets age: 10</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">gets age: 15</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>Now, that’s already a lot better, but we still need to split the <code>name</code> column into the two different variables it really includes. “name” is what <code>pivot_longer()</code> calls this new column by default. Remember, each column is a single variable.</p>
<pre class="r"><code>candydata_longer = candydata_raw %&gt;% 
  pivot_longer(contains(&quot;age&quot;)) %&gt;% 
  separate(name, into = c(&quot;questions&quot;, NA, &quot;age&quot;), convert = TRUE)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">candy_type</th>
<th align="left">questions</th>
<th align="right">age</th>
<th align="right">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">likes</td>
<td align="right">5</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">likes</td>
<td align="right">10</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">likes</td>
<td align="right">15</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">gets</td>
<td align="right">5</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="left">gets</td>
<td align="right">10</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="left">gets</td>
<td align="right">15</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">likes</td>
<td align="right">5</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">likes</td>
<td align="right">10</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">likes</td>
<td align="right">15</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">gets</td>
<td align="right">5</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="left">gets</td>
<td align="right">10</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="left">gets</td>
<td align="right">15</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>And <code>pivot_wider()</code> can be used to do the reverse:</p>
<pre class="r"><code>candydata = candydata_longer %&gt;% 
  pivot_wider(names_from = questions, values_from = value)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">candy_type</th>
<th align="right">age</th>
<th align="right">likes</th>
<th align="right">gets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Chocolate</td>
<td align="right">10</td>
<td align="right">6</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">Chocolate</td>
<td align="right">15</td>
<td align="right">8</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="right">5</td>
<td align="right">10</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Lollipop</td>
<td align="right">10</td>
<td align="right">8</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Lollipop</td>
<td align="right">15</td>
<td align="right">6</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>It is important to spell out the arguments here (<code>names_from =</code>, <code>values_frame =</code>) since they are not the second and third arguments of <code>pivot_wider()</code> (like they were in <code>spread()</code>). Investigate the <code>pivot_wider+F1</code> Help tab for more information.</p>
</div>
<div id="wrap-up-and-notes" class="section level1">
<h1>Wrap-up and notes</h1>
<p>Now these are datasets we can work with: each column is a variable, each row is an observation.</p>
<p>Do not start replacing working and tested instances of <code>gather()</code> or <code>spread()</code> in your existing R code with these new functions. That is neither efficient nor necessary - <code>gather()</code> and <code>spread()</code> will remain in <code>tidyr</code> to make sure people’s scripts don’t suddenly stop working. Meaning: <code>tidyr</code> is backward compatible. But after these functions are officially released, I will start using them in all new scripts I write.</p>
<p>I made the original messy columns still relatively nice to work with - no typos and reasonable delimiters. Usually, the labels are much worse and need the help of <code>janitor::clean_names()</code>, <code>stringr::str_replace()</code>, and multiple iterations of <code>tidyr::separate()</code> to arrive at a nice tidy tibble/data frame.</p>
<div id="tidyrseparate-tips" class="section level2">
<h2>tidyr::separate() tips:</h2>
<p><code>into = c(&quot;var1&quot;, NA, &quot;var2&quot;)</code> - now this is an amazing trick I only came across this week! This is a convenient way to drop useless (new) columns. Previously, I would have achieved the same result with:</p>
<pre><code>... %&gt;% 
    separate(..., into = c(&quot;var1&quot;, &quot;drop&quot;, &quot;var2&quot;)) %&gt;% 
    select(-drop) %&gt;% 
    ...
    </code></pre>
<p><code>convert = TRUE</code>: by default, <code>separate()</code> creates new variables that are also just “characters”. This means our age would have been a chacter vector of, e.g., “5”, “10”, rather than 5, 10, and R wouldn’t have known how to do arithmetic on it. In this example, <code>convert = TRUE</code> is equivalent to <code>mutate(age = as.numeric(age))</code>.</p>
<p>Good luck!</p>
<p>P.S. This is one of the coolest Tweets I’ve ever seen:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">On this auspicious day, in honor of tidyr, I am pleased to re-introduce you to pivot_longer and pivot_wider. <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> <a href="https://t.co/hj3zqYYbVf">pic.twitter.com/hj3zqYYbVf</a></p>&mdash; Ian Lyttle (@ijlyttle) <a href="https://twitter.com/ijlyttle/status/1112675046663876608?ref_src=twsrc%5Etfw">April 1, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</div>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/wrangling/">wrangling</a>

  <a class="tag tag--primary tag--small" href="/tags/tidyr/">tidyr</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/11/rstudio-server-lan-party/" data-tooltip="RStudio Server LAN party: Laptop&#43;Router&#43;Docker to serve RStudio offline">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/global-map-of-country-names/" data-tooltip="Global map of country names">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/04/new-intuitive-ways-to-reshape-data-in-r/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Riinu Ots. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/11/rstudio-server-lan-party/" data-tooltip="RStudio Server LAN party: Laptop&#43;Router&#43;Docker to serve RStudio offline">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/global-map-of-country-names/" data-tooltip="Global map of country names">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2019/04/new-intuitive-ways-to-reshape-data-in-r/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2019%2F04%2Fnew-intuitive-ways-to-reshape-data-in-r%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://pbs.twimg.com/profile_images/1090693362473152512/IAd8vXHs_400x400.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Riinu Ots</h4>
    
      <div id="about-card-bio">if it aint broke, you&rsquo;re outdated</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Manager
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Edinburgh, UK
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/11/rstudio-server-lan-party/">
                <h3 class="media-heading">RStudio Server LAN party: Laptop&#43;Router&#43;Docker to serve RStudio offline</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Introduction Requirements Set-up Why are you calling it a LAN party? Docker, containers, images    TLDR: You can teach R on people’s own laptops without having them install anything or require an internet connection.
 Members of the Surgical Informatics team in Ghana, 2019. More information: surgicalinformatics.org
 Introduction Running R programming courses on people’s own laptops is a pain, especially as we use a lot of very useful extensions that actually make learning and using R much easier and more fun.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/04/new-intuitive-ways-to-reshape-data-in-r/">
                <h3 class="media-heading">New intuitive ways for reshaping data in R: long live pivot_longer() and pivot_wider()</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">TLDR: there are two new and very intuitive R functions for reshaping data: see Examples of pivot_longer() and pivot_wider() below. At the time of writing, these new functions are extremely fresh and only exist in the development version on GitHub (see Installation), we should probably wait for the tidyverse team to officially release them (in CRAN) before putting them into day-to-day use.
Exciting!
Introduction The juxtapose of data collection vs data analysis: data that was very easy to collect, is probably very hard to analyse, and vice versa.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/09/global-map-of-country-names/">
                <h3 class="media-heading">Global map of country names</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This post demonstrates the use of two very cool R packages - ggrepel and patchwork.
ggrepel deals with overlapping text labels (Code#1 at the bottom of this post):
patchwork is a very convenient new package for combining multiple different plots together (i.e. what we usually to use grid and gridExtra for).
More info:
 https://github.com/slowkow/ggrepel
 https://github.com/thomasp85/patchwork
  To really demonstrate the power of them, let’s make a global map of country names using ggrepel:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/08/my-data-science-toolbox/">
                <h3 class="media-heading">My data science toolbox</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I&rsquo;ve been doing data science for over 10 years now. Although most of this time I didn&rsquo;t realise I was doing data science. I thought I was just doing normal science but focusing on simulations and data analysis, rather than field or lab work. I&rsquo;ve switched fields a few times now- physics BSc, Chemistry PhD, now working in medical research. Therefore, instead of this lenghty introduction:
 &ldquo;I&rsquo;m a physicist by background with substantial interdisciplinary expertise in simulations, data analysis, programming&hellip;&rdquo;</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/04/islay-distilleries-in-3-days/">
                <h3 class="media-heading">Islay distilleries in 3 days</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Day 0 (Sunday 18-February 2018) Left Edinburgh at 8am for a 1pm ferry Kennacraig to Port Askaig (Islay). Edinburgh-Kennacraig should be a 3.5h drive (and it was), but we left early to allow for any delays on the road. Arrived on Islay at 3pm and our accommodation near Port Ellen (southern Islay, close to to Ardbeg, Lagavulin, Laphroiaig) was a 40 min drive from the port.
Map of Islay with all its lovely distilleries.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/02/converting-old-wordpress-posts-to-hugo/">
                <h3 class="media-heading">Converting old Wordpress posts to Hugo</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Between 2014-2018 I published 29 posts on riinudata.wordpress.com. Today I’m converting all of those to my new website powered by blogdown-Hugo.
Step 1 Read the Migration: From Wordpress chapter of the blogdown book.
 Step 2 Get all your wordpress posts into one XML: WP Admin - Tools - Export.
 Step 3 Install Exitwp and its dependencies (pyyamp, beautifulsoup4, html2text):
git clone https://github.com/thomasf/exitwp.git sudo easy_install pip sudo pip install pyyaml sudo pip install beautifulsoup4 sudo pip install html2text This worked on macOS1 High Sierra - I already had python installed.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/02/hello-world/">
                <h3 class="media-heading">Hello world: blogdown loves Hugo</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">We are live! I wrote my last blog post on Wordpress on 20-October 2017 and promised myself this was the last time. I&rsquo;ve been blogging on Wordpress since 2014 and the more I used it the more painful it got! This is most likely caused by the fact that I have been thrifting further and further away from point-and-click interfaces anyway&hellip;oh and discovering MARKDOWN.
My two rules:  text is written in Markdown (I use R Markdown/knitr/bookdown, e.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/10/your-first-shiny-app/">
                <h3 class="media-heading">Your first Shiny app</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">What is Shiny? Shiny is an R package (install.packages(&quot;shiny&quot;)) for making your outputs interactive. Furthermore, Shiny creates web apps meaning your work can be shared online with people who don&rsquo;t use R. In other words: with Shiny, R people can make websites without ever learning Javascript etc.
I am completely obsessed with Shiny and these days I end up presenting most of my work in a Shiny app.
If it&rsquo;s not worth putting in a Shiny app it&rsquo;s not worth doing.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/07/r-replacing-nas-in-all-factors-with-missing/">
                <h3 class="media-heading">R: Replacing NAs in all factors with &#39;Missing&#39;</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">With a simple combination of mutate_if and fct_explicit_na,you can replace all NAs in all factors with &ldquo;Missing&rdquo;:
 dplyr reference: http://dplyr.tidyverse.org/reference
forcats reference: http://dplyr.tidyverse.org/reference</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/06/handling-your-bib-file-latex-bibliography/">
                <h3 class="media-heading">Handling your .bib file (LaTex bibliography)</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">To create a .bib file that only includes the citations you used in the manuscript:
bibexport -o extracted_file.bib manuscript.aux
There are a few issues with this though. The command bibexport comes with the installation of TexLive, but my Windows computer (bless) does not cooperate (&ldquo;bibexport is not recognised as an internal or external command&hellip;&rdquo;) . So I can only use it on my Mac (luv ya).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         32 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/cover.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2019\/04\/new-intuitive-ways-to-reshape-data-in-r\/';
          
            this.page.identifier = '\/2019\/04\/new-intuitive-ways-to-reshape-data-in-r\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'riinuots';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

